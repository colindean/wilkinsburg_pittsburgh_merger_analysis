<!DOCTYPE html>
<html>
<!--
Copyright 2021 Colin Dean
Some rights reserved. See LICENSE.md for details.
-->
  <head>
    <meta charset="utf-8" />
    <meta name="description" content="This calculator examines a few tax change scenarios should Pittsburgh annex Wilkinsburg. Find how how your taxes would change using this calculator.">
    <title>Wilkinsburg/Pittsburgh Annexation/Merger Tax Calculator</title>
    <style>
      table {
        border: 1px solid black;
      }
      tr.highlight {
        font-weight: bold;
      }
      td {
        border: 1px solid black;
      }
      thead {
        font-weight: bold;
      }
      .decrease {
        background: #cfc;
      }
      .decrease::after {
        content: ' less \025BC';
      }
      .increase {
        background: #fcc;
      }
      .increase::after {
        content: ' more \025B2';
      }
      form {
        margin: 2em;
      }
      body {
        font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
        font-size: 16px;
        line-height: 1.5;
      }
      #wage-helpers {
        display: inline-block;
      }
      #wage-helpers li {
        display: inline-block;
      }

      #wage-helpers li.rate button::after {
        content: "/hr";
      }
      #wage-helpers li.rate button::before {
        content: "$";
      }
    </style>
  </head>
<body>
<h1>Calculate your tax difference if Wilkinsburg is annexed by Pittsburgh</h1>

<form id="form">
  <div>
    <label for="income">Your Yearly <dfn title="Your total earned income, including wages, for yourself and a spouse, if you have one">Household Income</dfn>, no commas</label>
    <input name="income" id="income" placeholder="36700" type="number" min="0" step="0.01"/>
    <ul id="wage-helpers">
      <li>quick input full time at</li>
      <li class="rate"><button>7.25</button></li>
      <li class="rate"><button>10</button></li>
      <li class="rate"><button>15</button></li>
      <li>
        <label for="other">or use hourly</label>
        <input name="hourly" id="hourly" type="number" min="0" step="0.01"/>
      </li>
    </ul>
  </div>
  <div>
    <label for="property">Your House's Assessed Value (or enter <code>0</code> if you rent)</label>
    <input name="property" id="property" placeholder="33000" required type="number" min="0"/>
    <p>
      Don't know your house's assessed value?
      <a href="http://www2.alleghenycounty.us/RealEstate/Default.aspx">Look it up</a>.
      You'll want the "Total value" under the current year's "County Assessed Value".
    </p>
  </div>
  <button type="submit" name="calculate" id="calculate">Calculate</button>
</form>

<table>
  <thead>
    <tr>
      <td>Tax</td>
      <td>Wilkinsburg (present)</td>
      <td>Pittsburgh &amp; Pittsburgh SD (full merger)</td>
      <td>Increase versus present</td>
      <td>Wilkinsburg, Pittsburgh SD (school district merger only)</td>
      <td>Increase versus present</td>
      <td>Pittsburgh, Wilkinsburg SD (no school district merger)</td>
      <td>Increase versus present</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Earned Income Tax</td>
      <td id="w-eit"></td>
      <td id="p-eit"></td>
      <td id="p-eiti"></td>
      <td id="sch-eit"></td>
      <td id="sch-eiti"></td>
      <td id="psd-eit"></td>
      <td id="psd-eiti"></td>
    </tr>
    <tr>
      <td>Municipal Real Estate Property Tax</td>
      <td id="w-ret"></td>
      <td id="p-ret"></td>
      <td id="p-reti"></td>
      <td id="sch-ret"></td>
      <td id="sch-reti"></td>
      <td id="psd-ret"></td>
      <td id="psd-reti"></td>
    </tr>
    <tr>
      <td>School Property Tax</td>
      <td id="w-sdt"></td>
      <td id="p-sdt"></td>
      <td id="p-sdti"></td>
      <td id="sch-sdt"></td>
      <td id="sch-sdti"></td>
      <td id="psd-sdt"></td>
      <td id="psd-sdti"></td>
    </tr>
    <tr class="highlight">
      <td>Total Yearly Tax</td>
      <td id="w-tt"></td>
      <td id="p-tt"></td>
      <td id="p-tti"></td>
      <td id="sch-tt"></td>
      <td id="sch-tti"></td>
      <td id="psd-tt"></td>
      <td id="psd-tti"></td>
    </tr>
  </tbody>
</table>

<p>This calculator does not take into account Allegheny County real estate tax. That would not change as a result of the annexation.</p>

<h2>Scenario Descriptions</h2>

<dl>
    <dt>Wilkinsburg</dt>
    <dd>
        Your current taxation as a Wilkinsburg resident,
        and what your taxation would be going forward if no annexation occurs.
    </dd>
    <dt>Pittsburgh &amp; Pittsburgh SD (full merger)</dt>
    <dd>
        This would be your estimated taxation as a Pittsburgh resident,
        should Pittsburgh annex Wilkinsburg and make no changes to tax rates in the process
        <em>and</em> the Wilkinsburg and Pittsburgh school districts merge.
    </dd>
    <dt>Wilkinsburg, Pittsburgh SD (school district merger only)</dt>
    <dd>
        This would be your estimated taxation should Pittsburgh
        <em>not</em> annex Wilkinsburg but the school districts <em>do</em> merge or
        Wilkinsburg SD is simply dissolved.
        The Pittsburgh SD imposes a tax on incomes in addition to property tax.
        The <a href="https://en.wikipedia.org/wiki/Mount_Oliver,_Pennsylvania#Taxation">Borough of Mt. Oliver</a> uses Pittsburgh SD in this way.
    </dd>
    <dt>Pittsburgh, Wilkinsburg SD (no school district merger)</dt>
    <dd>
        This would be your estimated taxation if Pittsburgh annexed Wilkinsburg,
        but the school districts <em>do not merge</em> or delay merging with no adjustment to school tax rates.
        There currently is no part of the City of Pittsburgh that uses a school district other than
        Pittsburgh Public Schools, according to
        <a href="https://commons.wikimedia.org/wiki/File:Map_of_Allegheny_County_Pennsylvania_School_Districts.png">this map of Allegheny County school districts as of 2006</a>.
        This scenario is unlikely, per
        <a href="https://codes.findlaw.com/pa/title-24-ps-education/pa-st-sect-24-2-229.html">PA Title 24 § 2-229</a>, which indicates that the school districts would merge
        immediately upon annexation.
    </dd>
</dl>

<h2>Scenario Notes</h2>

<h3>Other Tax-Like Fees and Municipal Services</h3>
<p>This calculator does not account for any changes to the following:</p>
<ul>
  <li>
    A $200 municipal services fee for Wilkinsburg property owners paid yearly to Turtle Creek Valley Council of Governments for refuse collection.
    City of Pittsburgh does not charge a fee for this service; it is assumed included as a part of city taxes.
  </li>
  <li>
    Any changes to water and sewage bills.
    Wilkinsburg-Penn Joint Water Authority is separate from the Pittsburgh Water and Sewer Authority.
    I speculate that it is unlikely that these two entities would merge, but I know that such would be a separate merger process.
  </li>
  <li>
    The City of Pittsburgh has a higher realty transfer tax (RTT) than Wilkinsburg. This increases the cost of purchasing a home.
    It stands at 5% and may be the highest in the country, according to <a href="https://taxnews.ey.com/news/2018-0396-city-of-pittsburgh-increases-realty-transfer-tax-rate">this E&Y report</a>. The <a href="https://www.alleghenycounty.us/real-estate/realty-transfer-tax-municipality-rates.aspx">Allegheny County Realty Transfer Tax database</a> lists Wilkinsburg as 0.5% each to Wilkinsburg borough and Wilkinsburg SD (1% total) in addition to the 1% that goes to the Commonwealth of Pennsylvania for a total of 2% RTT. The same database shows 3% to the City of Pittsburgh and 1% to the Pittsburgh SD. RTT is paid by the purchaser as a part of closing costs. As a result, it would become more expensive to purchase property in Wilkinsburg, paying $3,000 more per $100,000.
  </li>
</ul>

<h3>Annexation and Merger Procedures</h3>
<p>
    It is important to understand that the annexation of the municipality
    and the merger of the school districts are two separate actions requiring approval of five different bodies.
</p>
<ul>
    <li>
      <p>
        Per <a href="https://codes.findlaw.com/pa/title-53-ps-municipal-and-quasimunicipal-corporations/pa-st-sect-53-13301.html"
               title="Pennsylvania Statutes Title 53 P.S. Municipal and Quasi-Municipal Corporations § 13301. Consent of voters of political subdivision annexed"
               >PA Title 53 § 13301</a>, as well as much of the rest of
        <a href="https://codes.findlaw.com/pa/title-53-ps-municipal-and-quasimunicipal-corporations/"
           title="Pennsylvania Statutes Title 53 P.S. Municipal and Quasi-Municipal Corporations"
           >PA Title 53 Part I Ch. 4 § 171-181</a>the procedure is approximately as follows.
        Following the collection, validation, and court acceptance of valid signatures of 10% of the Wilkinsburg registered voters,
        the <b>City of Pittsburgh council</b> would have to approve the petition/referendum by simple majority vote before 
        <b>Wilkinsburg voters</b> would vote on annexation through a ballot question referendum
        at an election at least 60 days after the acceptance of the petition and approval by City council.
        If it passes, the procedure is 
        <i>(to be researched &mdash;
          only 11 of 16 annexation and three of 21 consolidation proposals statewide between 1975&ndash;2014 have succeeded,
          most were townships and boroughs merging; 
          see 
          <a 
             href="https://whyy.org/articles/mergers-and-consolidations-how-municipalities-change-boundaries/"
             title="Municipal mergers and consolidations: solution for distressed municipalities?"
             >this WHYY article</a>)</i>.
        If the referendum fails, it cannot be revisited for five years.
      </p>
      <p>
        City of Pittsburgh voters do not have a direct, popular voice in the matter.
        Borough of Wilkinsburg council may have limited power to intercede.
        If Borough council supported the annexation, it could vote to send the question to referendum.
        In any case, a public referendum of Wilkinsburg voters is required for the annexation to occur.
      </p>
    </li>
    <li>
        For the <b>school districts</b> to merge, according to
        <a
            href="https://codes.findlaw.com/pa/title-24-ps-education/pa-st-sect-24-2-224.html"
            title="Pennsylvania Statutes Title 24 P.S. Education § 2-224. Combination of school districts"
            >current PA law</a>,
        <b>both school boards</b> would each have to approve and <b>the State Board of Education</b> would then have to approve.
        However, another statue indicates that 
        <a
           href="https://codes.findlaw.com/pa/title-24-ps-education/pa-st-sect-24-2-229.html"
           title="Pennsylvania Statutes Title 24 P.S. Education § 2-229. Annexation to district of first class or first class A"
           >annexation of the territory of a 2nd, 3rd, or 4th class school district 
            by a city with a 1st class school district may force combination immediately upon annexation</a>.
        The annexing school district <em>may</em>
        <a href="https://codes.findlaw.com/pa/title-24-ps-education/pa-st-sect-24-2-230.html"
           title="Pennsylvania Statutes Title 24 P.S. Education § 2-230. Approval of contracts and changes after vote for annexation"
           >takes over contracting duties immediately</a>.
        According to
        <a href="https://www.legis.state.pa.us/cfdocs/legis/LI/uconsCheck.cfm?txtType=HTM&yr=1949&sessInd=0&smthLwInd=0&act=14&chpt=2&sctn=2&subsctn=0"
           title="PA Public School Code Act 14 of 1949 § 2-202"
           >PA Act 14</a>, Pittsburgh SD is considered 1st class "A" by its population and Wilkinsburg is considered 3rd class.
    </li>
</ul>

<h2>Other notes</h2>

<p>
  Looking for a quick way to lower your property tax for your primary residence by a little?
  Check out the <a href="https://www.alleghenycounty.us/real-estate/abatements-exemptions/act-50/act-50-faqs.aspx">Homestead/Farmstead Property Tax Relief</a>.
  <a href="https://www.alleghenycounty.us/real-estate/abatements-exemptions/act-50/act-50-application-process.aspx">Read about the application process</a>
  and follow the instructions to reduce your primary residence's assessed value.
  You can take advantage of this program anywhere in Pennsylvania via your county -- the links in this paragraph are directly to Allegheny County resources.
</p>

<p>Found a problem? Report it <a href="https://github.com/colindean/wilkinsburg_pittsburgh_merger_analysis/issues/new">here</a>.</p>

<p>Want to make this look better or verify the rates? The code is <a href="https://github.com/colindean/wilkinsburg_pittsburgh_merger_analysis/blob/main/calculator.html">here</a>.</p>

<p><a href="./">Back to more information</a></p>

<h2 id="changelog">Changelog</h2>

<ul>
  <li><p>
    <time datetime="2021-11-07">November 7</time>: The calculator now includes the City of Pittsburgh
    <a href="https://pittsburghpa.gov/finance/tax-descriptions#476">parks tax</a> of 0.5 mills in
    real estate tax calculations. Wilkinsburg does not have a similar tax.
  </p></li>

  <li><p>
    <time datetime="2021-07-13">July 13</time>: The calculator had a bug that double-counted
    EIT in the "school merger only" scenario and failed to account for higher city EIT in the
    "no school merger" scenario. The effect on the former is miniscule but the effect on the latter
    is significant. Sorry for the error and thanks to Chris Peplin for providing
    <a href="https://github.com/colindean/wilkinsburg_pittsburgh_merger_analysis/pull/6">a fix</a> for
    <a href="https://github.com/colindean/wilkinsburg_pittsburgh_merger_analysis/issues/5">the problem</a>
    I identified but didn't have time to fix on July 8.
  </p></li>

  <li><p>
    <time datetime="2021-07-08">July 8</time>: The calculator was updated to reflect the
    2021-2022 Wilkinsburg SD school real estate tax reduction to 26.5 mills,
    approved at the <time datetime="2021-06-22">June 22</time> board meeting.
    Calculations performed before July 8 do not include this and the present Wilkinsburg
    scenario is now lower.
  </p></li>

<script>
    // https://www.wilkinsburgpa.gov/departments/finance-department/tax-questions/
    function w_sch_eit(income) { return income * 0.005; }
    function w_city_eit(income) { return income * 0.005; }
    function w_eit(income) { return w_sch_eit(income) + w_city_eit(income); }

    // https://pittsburghpa.gov/finance/tax-descriptions
    function p_sch_eit(income) { return income * 0.02; }
    function p_city_eit(income) { return income * 0.01; }
    function p_eit(income) { return p_sch_eit(income) + p_city_eit(income); }

    // https://alleghenycountytreasurer.us/real-estate-tax/local-and-school-district-tax-millage/
    function w_ret(property) { return property * (14.0/1000); }
    // https://github.com/colindean/wilkinsburg_pittsburgh_merger_analysis/pull/2#issuecomment-876449576
    function w_sdt(property) { return property * (26.5/1000); }

    // https://pittsburghpa.gov/finance/tax-faqs#29
    function p_ret_realestate(property) { return property * (8.06/1000); }
    // https://pittsburghpa.gov/finance/tax-descriptions#476
    function p_ret_parktax(property) { return property * (0.50/1000); }
    function p_ret(property) { return p_ret_realestate(property) + p_ret_parktax(property); }
    function p_sdt(property) { return property * (9.95/1000); }

    function calculate(){
        let income = parseFloat(document.getElementById('income').value);
        if (!income) {
          income = parseFloat(document.getElementById('hourly').value) * 40 * 52;
          document.getElementById('income').placeholder = income;
        }
        let property = parseFloat(document.getElementById('property').value);

        let results = new Map();

        // Present Wilkinsburg values
        let wilk = w_eit(income) + w_ret(property) + w_sdt(property);
        results.set('w-eit', w_eit(income));
        results.set('w-ret', w_ret(property));
        results.set('w-sdt', w_sdt(property));
        results.set('w-tt', wilk);

        // Full merger
        let pgh = p_eit(income) + p_ret(property) + p_sdt(property);
        results.set('p-eit', p_eit(income));
        results.set('p-eiti', results.get('p-eit') - w_eit(income));
        results.set('p-ret', p_ret(property));
        results.set('p-reti', results.get('p-ret') - w_ret(property));
        results.set('p-sdt', p_sdt(property));
        results.set('p-sdti', results.get('p-sdt') - w_sdt(property));
        results.set('p-tt', pgh);
        results.set('p-tti', pgh - wilk);

        // School district merger only
        let wilk_pghsd = w_city_eit(income) + p_sch_eit(income) + w_ret(property) + p_sdt(property);
        results.set('sch-eit', w_city_eit(income) + p_sch_eit(income));
        results.set('sch-eiti', results.get('sch-eit') - w_eit(income));
        results.set('sch-ret', w_ret(property));
        results.set('sch-reti', 0.0);
        results.set('sch-sdt', p_sdt(property));
        results.set('sch-sdti', results.get('sch-sdt') - w_sdt(property));
        results.set('sch-tt', wilk_pghsd);
        results.set('sch-tti', wilk_pghsd - wilk);

        // City/borough merger only
        let pgh_wilksd =  p_city_eit(income) + w_sch_eit(income) + p_ret(property) + w_sdt(property);
        results.set('psd-eit', p_city_eit(income) + w_sch_eit(income));
        results.set('psd-eiti', results.get('psd-eit') - w_eit(income));
        results.set('psd-ret', p_ret(property));
        results.set('psd-reti', results.get('psd-ret') - w_ret(property));
        results.set('psd-sdt', w_sdt(property));
        results.set('psd-sdti', 0.0);
        results.set('psd-tt', pgh_wilksd);
        results.set('psd-tti', pgh_wilksd - wilk);

        return results;
    }

    function display(results) {
        results.forEach(function(value, key) {
          console.log(key + ' = ' + value);
          let elem = document.getElementById(key);
          let dollars = Math.abs(Math.round(value,2)).formatMoney();
          elem.innerText = dollars;
          if (key.endsWith('i')) {
              Array.from(['decrease','increase']).forEach(function(cl){
                  elem.classList.remove(cl);
              });
              if (value != 0) {
                let c = value < 0 ? 'decrease' : 'increase';
                elem.classList.add(c);
              }
          }
        });
    }

    window.onload = function(){
      let form = document.getElementById('form');
      form.onsubmit = function(e) {
        e.preventDefault();
        display(calculate());
      };

      let helpers_list = document.getElementById('wage-helpers')
      Array.from(helpers_list.getElementsByTagName("button")).forEach(function(button){
        button.onclick = function(e) {
          e.preventDefault();
          document.getElementById('income').value = parseFloat(button.innerText) * 40 * 52;
        }
      });
    };

    // https://stackoverflow.com/a/11270819/204052
    Number.prototype.formatMoney = function(decPlaces, thouSeparator, decSeparator, currencySymbol) {
        // check the args and supply defaults:
        decPlaces = isNaN(decPlaces = Math.abs(decPlaces)) ? 2 : decPlaces;
        decSeparator = decSeparator == undefined ? "." : decSeparator;
        thouSeparator = thouSeparator == undefined ? "," : thouSeparator;
        currencySymbol = currencySymbol == undefined ? "$" : currencySymbol;

        var n = this,
            sign = n < 0 ? "-" : "",
            i = parseInt(n = Math.abs(+n || 0).toFixed(decPlaces)) + "",
            j = (j = i.length) > 3 ? j % 3 : 0;

        return sign + currencySymbol + (j ? i.substr(0, j) + thouSeparator : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + thouSeparator) + (decPlaces ? decSeparator + Math.abs(n - i).toFixed(decPlaces).slice(2) : "");
    };


</script>

</body>
</html>
